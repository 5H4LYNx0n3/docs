---
title: 'CRUD'
metaTitle: 'CRUD (Reference)'
metaDescription: 'This page provides a detailed reference of the auto-generated CRUD queries that are exposed in the Prisma Client API, such as findOne, findMany, create, ...'
tocDepth: 3
---

<TopBlock>

* Create
* Read, including filtering
* Update
* Delete

</TopBlock>

## Example schema

All examples are based on the following schema:

```prisma
generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model ExtendedProfile {
  id        Int    @id @default(autoincrement())
  biography String
  user      User   @relation(fields: userId, references: id)
  userId    Int
}

model User {
  id           Int             @id @default(autoincrement())
  name         String?
  email        String          @unique
  profileViews Int             @default(0)
  role         Role            @default(USER)
  coinflips    Boolean[]
  posts        Post[]
  profile      ExtendedProfile
}

model Post {
  id         Int        @id @default(autoincrement())
  title      String
  published  Boolean    @default(true)
  author     User       @relation(fields: [authorId], references: [id])
  authorId   Int
  comments   Json?
  views      Int        @default(0)
  likes      Int        @default(0)
  categories Category[]
}

model Category {
  id    Int    @id @default(autoincrement())
  name  String @unique
  posts Post[]
}

enum Role {
  USER
  ADMIN
}
```

Use the `db push` command to push the example schema to your own database.

## Create

### Create a single record

- [`create`](../../../reference/api-reference/prisma-client-reference#create) <span class="api"></span> a single `User` record

<CodeWithResult>
<Cmd>

```ts
const user = await prisma.user.create({
  data: {
    email: 'elsa@prisma.io',
    name: 'Elsa Prisma',
  },
})
```

</Cmd>
<CmdResult>

```js
{
  id: 22,
  name: 'Elsa Prisma',
  email: 'elsa@prisma.io',
  profileViews: 0,
  role: 'USER',
  coinflips: []
}
```

</CmdResult>
</CodeWithResult>

### Create multiple records

Can't do this yet.

### Create a record and several related records

- [`create`](../../../reference/api-reference/prisma-client-reference#create) <span class="api"></span> new `User` record
- [`create`](../../../reference/api-reference/prisma-client-reference#create) <span class="api"></span> multiple related `Post` records
- `include` <span class="api"></span> the user's post in the returned object (optional)

<CodeWithResult>
<Cmd>

```ts
const user = await prisma.user.create({
  data: {
    email: 'elsa@prisma.io',
    name: 'Elsa Prisma',
    posts: {
      create: [{ title: 'How to make an omelette' }, { title: 'How to eat an omelette' }],
    },
  },
  include: {
    posts: true, // Include all posts in the returned object
  },
})
```

</Cmd>
<CmdResult>

```js
{
  id: 29,
  name: 'Elsa Prisma',
  email: 'elsa@prisma.io',
  profileViews: 0,
  role: 'USER',
  coinflips: [],
  posts: [
    {
      id: 22,
      title: 'How to make an omelette',
      published: true,
      authorId: 29,
      comments: null,
      views: 0,
      likes: 0
    },
    {
      id: 23,
      title: 'How to eat an omelette',
      published: true,
      authorId: 29,
      comments: null,
      views: 0,
      likes: 0
    }
  ]
}
```

</CmdResult>
</CodeWithResult>

### Create a record and connect it to an existing related record

- [`create`](../../../reference/api-reference/prisma-client-reference#create) <span class="api"></span> a new `User` record
- `connect` <span class="api"></span> the new user to multiple existing `Post` records by `id`
- `include` <span class="api"></span> the user's post in the returned object (optional)

<CodeWithResult>
<Cmd>

```ts
const user = await prisma.user.create({
  data: {
    email: 'vlad@prisma.io',
    posts: {
      connect: [{ id: 8 }, { id: 9 }, { id: 10 }],
    },
  },
  include: {
    posts: true, // Include all posts in the returned object
  },
})
```

</Cmd>
<CmdResult>

```js
{
  id: 27,
  name: null,
  email: 'vlad@prisma.io',
  profileViews: 0,
  role: 'USER',
  coinflips: [],
  posts: [
    {
      id: 10,
      title: 'An existing post',
      published: true,
      authorId: 27,
      comments: {},
      views: 0,
      likes: 0
    }
  ]
}
```

</CmdResult>
</CodeWithResult>

> **Note**: Prisma Client throws an exception if any of the post records cannot be found: `connect: [{ id: 8 }, { id: 9 }, { id: 10 }]`

### Create a single record using generated types

```ts
// Create input object
let user: UserCreateInput = {
  email: 'vlad@prisma.io',
  posts: {
    connect: [{ id: 8 }, { id: 9 }, { id: 10 }],
  },
}

// Create user
const createUser = await prisma.user.create({ data: user })
```

More about using generated types.

## Read

### Get record by ID or unique identifier

`findFirst` <span class="api"></span>

```ts
const user = await prisma.user.findOne({
  where: {
    email: 'elsa@prisma.io',
  },
})
```

```ts
const user = await prisma.user.findOne({
  where: {
    id: 99,
  },
})
```

### Get all records

```ts
const user = await prisma.user.findMany()
```

### Get a filtered list of records

#### Filter by a single field value

```ts
  const users = await prisma.user.findMany({
    where: {
      email: {
        endsWith: "prisma.io"
      }
    },
  }
```

#### Filter by multiple field values

- Name starts with `E`

_OR_

- More than 0 profile views
- Is an admin

```ts
const users = await prisma.user.findMany({
  where: {
    OR: [
      {
        name: {
          startsWith: 'E',
        },
      },
      {
        AND: {
          profileViews: {
            gt: 0,
          },
          role: {
            equals: 'ADMIN',
          },
        },
      },
    ],
  },
})
```

#### Filter by related record field values

- User's email ends with `prisma.io`
- User has at least _one_ post (`some`) that is not published

```ts
  const users = await prisma.user.findMany({
    where: {
      email: {
        endsWith: "prisma.io"
      },
      posts: {
        some: {
          published: false
        }
      }
    },
  }
```

- User has at least _no_ posts (`none`) with more than 100 views

```ts
  const users = await prisma.user.findMany({
    where: {
      posts: {
        none: {
          views: {
            gt: 100
          }
        }
      }
    },
  }
```

### Include related records

```ts
const user = await prisma.user.findMany({
  where: {
    role: 'ADMIN',
  },
  include: {
    posts: true,
  },
})
```

### Include a filtered list of related records

```ts
const user = await prisma.user.findMany({
  where: {
    role: 'ADMIN',
  },
  include: {
    posts: {
      where: {
        title: {
          contains: 'Prisma',
        },
      },
    },
  },
})
```

- Get a list of users and their published posts
- Get a list of users and any posts with zero views

### Select a subset of fields

<CodeWithResult>
<Cmd>

```ts
const user = await prisma.user.findOne({
  where: {
    email: 'emma@prisma.io',
  },
  select: {
    email: true,
    name: true,
  },
})
```

</Cmd>
<CmdResult>

```js
{ email: 'emma@prisma.io', name: "Emma" }
```

</CmdResult>
</CodeWithResult>

#### Select a subset of related record fields

<CodeWithResult>
<Cmd>

```ts
const user = await prisma.user.findOne({
  where: {
    email: 'emma@prisma.io',
  },
  select: {
    email: true,
    posts: {
      select: {
        likes: true,
      },
    },
  },
})
```

</Cmd>
<CmdResult>

```js
{ email: 'emma@prisma.io', posts: [ { likes: 0 }, { likes: 0 } ] }
```

</CmdResult>
</CodeWithResult>

### Select distinct field values

## Update

### Update a single record

### Update multiple records

### Update or insert records

### Disconnect a related record

### Connect a related record

#### Connect an existing record

#### Connect a new record

## Delete

## Advanced query examples

### Create a deeply nested tree of records

- A single `User`
- Two new, related `Post` records
- Connect or create `Category` per post

```ts
const u = await prisma.user.create({
  include: {
    posts: {
      include: {
        categories: true,
      },
    },
  },
  data: {
    email: 'emma@prisma.io',
    posts: {
      create: [
        {
          title: 'My first post',
          categories: {
            connectOrCreate: [
              {
                create: { name: 'Introductions' },
                where: {
                  name: 'Introductions',
                },
              },
              {
                create: { name: 'Social' },
                where: {
                  name: 'Social',
                },
              },
            ],
          },
        },
        {
          title: 'How to make cookies',
          categories: {
            connectOrCreate: [
              {
                create: { name: 'Social' },
                where: {
                  name: 'Social',
                },
              },
              {
                create: { name: 'Cooking' },
                where: {
                  name: 'Cooking',
                },
              },
            ],
          },
        },
      ],
    },
  },
})
```

## FAQ

#### Should I use <inlinecode>connect</inlinecode> or <inlinecode>connectOrCreate</inlinecode>?
