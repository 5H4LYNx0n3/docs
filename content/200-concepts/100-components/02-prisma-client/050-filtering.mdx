---

title: 'Filtering'
metaTitle: 'Filtering (Reference)'
metaDescription: 'Use the Prisma Client API to filter records by any combination of fields or related record fields.'
---

<TopBlock>

Prisma Client allows you to filter records on any combination of model fields, including related models, and supports a variety of filter conditions.

For example, the following query returns all `User` records with at least one published post and an email address that ends with `prisma.io`:

```js
const result = await prisma.user.findMany({
  where: {
    email: {
      endsWith: 'prisma.io',
    },
    posts: {
      some: {
        published: true,
      },
    },
  },
})
```

The following queries support filtering:

- `findMany`
- `updateMany`
- `deleteMany`
- `count`

The following filter types are generated from the default model:



</TopBlock>

## Basic filtering


## Combining filters


## Filter on related records

You can filter records based on related record fields. For example, the following query returns all `Post` records where the user's email address is `sarah@prisma.io`:

```js
const result = await prisma.post.findMany({
  where: {
    user: {
      email: {
        equals: 'sarah@prisma.io',
      },
    },
  },
})
```


## Filter within `include`

When you use `include` to load related records (for example, a user's posts), you can filter which related records should be returned. For example, you might want to return all users, but only include posts that have been published. Some user records will be returned without any posts.

### Examples

#### Retrieve _all_ `User` records, and include all `Post` records that have not been published yet

```js
const result = await prisma.user.findMany(
  include: {
    Post: {
      where: {
        published: false,
      },
    },
  },
})
```

> **Note**: Some users records will be returned without any posts.

#### Retrieve `User` records with at least one `Post` that isn't published, and include all `Post` records that have not been published yet

```js
const result = await prisma.user.findMany({
  where: {
    Post: {
      some: {
        published: false,
      },
    },
  },
  include: {
    Post: {
      where: {
        published: false,
      },
    },
  },
})
```

#### Retrieve all `User` records where the `email` contains `Prisma`, and include all `Post` records that have not been published yet

```js
const result = await prisma.user.findMany({
  where: {
    email: {
      contains: 'prisma.io',
    },
  },
  include: {
    Post: {
      where: {
        published: false,
      },
    },
  },
})
```

## Filter within `select`

When you use `select` to return a subset of data from related records (for example, a user's posts), you can filter which related records should be returned. For example, you might want to query all users with a `prisma.io` email address and select the titles of their published posts.

### Examples

#### Retrieve _all_ `User` records where `email` contains `prisma.io`, and select the `title` of all `Post` records that have not been published yet

```js
const result = await prisma.user.findMany({
  where: {
    email: {
      contains: 'prisma.io',
    },
  },
  select: {
    Post: {
      where: {
        published: false,
      },
      select: {
        title: true,
      },
    },
  },
})
```

You can use the `post` model property to write the same query:

```js
const result = await prisma.post.findMany({
  where: {
    published: false,
    User: {
      email: {
        contains: 'prisma.io',
      },
    },
  },
  select: {
    title: true,
  },
})
```

## Select distinct records when filtering

Prisma Client allows you to filter duplicate rows from a Prisma Query response to a [`findMany`](./crud#findMany) query using `distinct`. 

`distinct` is often used in combination with [`select`](./field-selection#select) to identify certain unique combinations of values in the rows of your table.

```ts
const result = await prisma.user.findMany({
  where: {},
  distinct: ['name'],
})
```

## Case-insensitive filtering

Case-insensitive filtering [is available as a feature for the PostgreSQL provider](case-sensitivity#options-for-case-insensitive-filtering). MySQL and MariaDB are case-insensitive by default, and do not require a Prisma Client feature to make case-insensitive filtering possible.

To use case-insensitive filtering, add the `mode` property to a particular filter and specify `insensitive`:

```ts
const users = await prisma.user.findMany({
  where: {
    email: {
      endsWith: "prisma.io",
|      mode: "insensitive", // Default value: default
    },
    name: {
       equals: "Archibald" // Default mode
    }
  },
});
```

See also: [Case sensitivity](case-sensitivity)

## Filter `Json` fields

See [Working with JSON](working-with-json#filtering).
